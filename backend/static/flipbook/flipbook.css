.book-container {
  perspective: 2500px;
}

.book {
  transform-style: preserve-3d;
}

.page {
  --angle: 0deg;
  --bend: 0;
  --shade: 0;
  --gloss: 0;
  backface-visibility: hidden;
  will-change: transform;
}

.page.is-flipping {
  transform: rotateY(var(--angle));
  filter: drop-shadow(0 18px 30px rgba(0,0,0,0.18));
}

.page.is-flipping .page-content {
  transform: translateZ(calc(var(--bend) * 1px));
}

.page.is-flipping .page-front::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to right,
    rgba(0,0,0, calc(0.35 * var(--shade))) 0%,
    rgba(0,0,0, calc(0.15 * var(--shade))) 35%,
    rgba(0,0,0, 0) 65%
  );
  pointer-events: none;
}

.page.is-flipping .page-front::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(
    120% 100% at 0% 50%,
    rgba(255,255,255, calc(0.35 * var(--gloss))) 0%,
    rgba(255,255,255, 0) 60%
  );
  mix-blend-mode: screen;
  pointer-events: none;
}

.page.is-flipping .page-back::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to left,
    rgba(0,0,0, calc(0.35 * var(--shade))) 0%,
    rgba(0,0,0, calc(0.15 * var(--shade))) 35%,
    rgba(0,0,0, 0) 65%
  );
  pointer-events: none;
}

@media (prefers-reduced-motion: reduce) {
  .page.is-flipping {
    transition: transform 0.25s ease;
  }
}
