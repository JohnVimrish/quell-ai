import{r,j as e}from"./main-BY7oEhUj.js";const p={meetings:[],pagination:{page:1,total:0}};function u(){const[a,o]=r.useState(p),[i,c]=r.useState(!0),[l,d]=r.useState(null);r.useEffect(()=>{let s=!0;async function t(){c(!0),d(null);try{const n=await fetch("/api/meetings?page=1&limit=20",{credentials:"include"});if(!n.ok)throw new Error(`request failed: ${n.status}`);const h=await n.json();s&&o(h)}catch(n){s&&d(n instanceof Error?n.message:"unknown error")}finally{s&&c(!1)}}return t(),()=>{s=!1}},[]);const m=r.useMemo(()=>{if(!a.meetings.length)return 0;const s=a.meetings.filter(t=>t.ai_participated).length;return Math.round(s/a.meetings.length*100)},[a.meetings]);return e.jsxs("div",{className:"section-padding",children:[e.jsxs("div",{className:"glass-panel",style:{padding:"48px",marginBottom:"32px"},children:[e.jsx("h1",{className:"page-title",children:"Meetings & Delegation"}),e.jsx("p",{className:"page-intro",children:"Track where the AI assistant joined on your behalf, review summaries, and fine-tune delegation rules for Zoom and Teams."})]}),e.jsxs("div",{className:"grid-two",style:{gap:"24px"},children:[e.jsxs("div",{className:"glass-panel",style:{padding:"32px"},children:[e.jsx("h2",{className:"panel-title",children:"Weekly Impact"}),i?e.jsx("p",{children:"Loading weekly metrics�"}):l?e.jsxs("p",{role:"alert",children:["Unable to load meetings: ",l]}):e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("span",{className:"metric-label",children:"Sessions captured"}),e.jsx("span",{className:"metric-value",children:a.pagination.total})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("span",{className:"metric-label",children:"AI coverage"}),e.jsxs("span",{className:"metric-value",children:[m,"%"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("span",{className:"metric-label",children:"Channels"}),e.jsx("span",{className:"metric-value",children:Array.from(new Set(a.meetings.map(s=>s.channel||"zoom"))).join(", ")||"zoom"})]})]})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"32px"},children:[e.jsx("h2",{className:"panel-title",children:"Delegation checklist"}),e.jsxs("ul",{className:"bullet-list",children:[e.jsx("li",{children:"Auto-join windows respect your out-of-office schedule."}),e.jsx("li",{children:"Voice clone reminders trigger before customer-facing sessions."}),e.jsx("li",{children:"Document policies gate sensitive decks before sharing."}),e.jsx("li",{children:"Attendees see a disclosure when the AI represents you."})]})]})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"32px",marginTop:"32px"},children:[e.jsxs("div",{className:"panel-header",children:[e.jsx("h2",{className:"panel-title",children:"Recent meetings"}),e.jsx("span",{className:"panel-subtitle",children:"The assistant keeps transcripts, highlights, and action items synchronized across channels."})]}),i&&e.jsx("p",{children:"Loading meeting history�"}),!i&&l&&e.jsx("p",{role:"alert",children:l}),!i&&!l&&a.meetings.length===0&&e.jsx("p",{children:"No meetings captured yet. Connect Zoom or Teams and enable delegation to see sessions here."}),!i&&!l&&a.meetings.length>0&&e.jsxs("div",{className:"table",role:"table",children:[e.jsxs("div",{className:"table-row table-header",role:"row",children:[e.jsx("span",{role:"columnheader",children:"Title"}),e.jsx("span",{role:"columnheader",children:"Status"}),e.jsx("span",{role:"columnheader",children:"Channel"}),e.jsx("span",{role:"columnheader",children:"AI delegate"}),e.jsx("span",{role:"columnheader",children:"Summary"})]}),a.meetings.map(s=>e.jsxs("div",{className:"table-row",role:"row",children:[e.jsx("span",{role:"cell",children:s.subject||"Untitled meeting"}),e.jsx("span",{role:"cell",children:s.status||"completed"}),e.jsx("span",{role:"cell",children:s.channel||"zoom"}),e.jsx("span",{role:"cell",children:s.ai_participated?"AI covered":"User"}),e.jsx("span",{role:"cell",title:s.summary_text||void 0,children:s.summary_text?s.summary_text.slice(0,140):"Summary pending"})]},s.id))]})]})]})}export{u as default};
