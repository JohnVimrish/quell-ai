import{r,j as e}from"./main-BY7oEhUj.js";const y={ai_mode_enabled:!1,auto_join_meetings:!1,auto_reply_chats:!1,voice_clone_enabled:!1,disclose_voice_clone:!0,data_retention_days:30,transcript_auto_delete_days:90};function _(){const[n,l]=r.useState(y),[c,p]=r.useState(!0),[i,u]=r.useState(!1),[g,h]=r.useState(null),[x,m]=r.useState(null);r.useEffect(()=>{let t=!0;async function a(){p(!0),h(null);try{const s=await fetch("/api/settings",{credentials:"include"});if(!s.ok)throw new Error(`request failed: ${s.status}`);const j=await s.json();t&&l({...y,...j})}catch(s){t&&h(s instanceof Error?s.message:"unknown error")}finally{t&&p(!1)}}return a(),()=>{t=!1}},[]);async function f(t){t.preventDefault(),u(!0),h(null);try{const a=await fetch("/api/settings",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error(`request failed: ${a.status}`);const s=await a.json();l({...y,...s}),m(new Date().toLocaleTimeString())}catch(a){h(a instanceof Error?a.message:"unknown error")}finally{u(!1)}}function o(t,a){l(s=>({...s,[t]:a}))}return e.jsxs("div",{className:"section-padding",children:[e.jsxs("div",{className:"glass-panel",style:{padding:"48px",marginBottom:"32px"},children:[e.jsx("h1",{style:{fontSize:"clamp(2.5rem, 4vw, 3rem)",fontWeight:800,margin:"0 0 16px",background:"var(--gradient-orange-green)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Settings"}),e.jsx("p",{style:{color:"var(--color-grey-600)",fontSize:"1.15rem",margin:0},children:"Configure what the AI can handle, when it should disclose itself, and how long data sticks around."})]}),e.jsx("form",{className:"glass-panel",style:{padding:"40px"},onSubmit:f,children:c?e.jsx("p",{children:"Loading settings..."}):e.jsxs("div",{style:{display:"grid",gap:"32px",maxWidth:"820px"},children:[e.jsxs("section",{children:[e.jsx("h3",{style:{marginBottom:"20px",color:"var(--color-grey-900)"},children:"Assistant coverage"}),e.jsx(d,{label:"Enable AI across channels",description:"When on, the delegate can pick up calls, attend meetings, and answer chat while you are away.",checked:n.ai_mode_enabled,onChange:t=>o("ai_mode_enabled",t)}),e.jsx(d,{label:"Auto-join Zoom/Teams when busy",description:"The assistant will join scheduled meetings when your calendar says busy or out of office.",checked:n.auto_join_meetings,onChange:t=>o("auto_join_meetings",t)}),e.jsx(d,{label:"Auto-reply in Slack/Teams chat",description:"Respond on your behalf while you are offline, respecting important contact overrides.",checked:n.auto_reply_chats,onChange:t=>o("auto_reply_chats",t)})]}),e.jsxs("section",{children:[e.jsx("h3",{style:{marginBottom:"20px",color:"var(--color-grey-900)"},children:"Voice and transparency"}),e.jsx(d,{label:"Enable voice clone",description:"Allow the assistant to speak in your voice during calls and meetings.",checked:n.voice_clone_enabled,onChange:t=>o("voice_clone_enabled",t)}),e.jsx(d,{label:"Require disclosure before speaking",description:"Play an announcement before the clone voice introduces itself to new participants.",checked:n.disclose_voice_clone,onChange:t=>o("disclose_voice_clone",t),disabled:!n.voice_clone_enabled})]}),e.jsxs("section",{children:[e.jsx("h3",{style:{marginBottom:"20px",color:"var(--color-grey-900)"},children:"Data retention"}),e.jsxs("div",{className:"placeholder-card",children:[e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("span",{children:"Auto-delete documents after (days)"}),e.jsx("input",{type:"number",min:7,value:n.data_retention_days,onChange:t=>o("data_retention_days",Number(t.target.value)||0),className:"input"})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"16px"},children:[e.jsx("span",{children:"Auto-delete transcripts after (days)"}),e.jsx("input",{type:"number",min:14,value:n.transcript_auto_delete_days,onChange:t=>o("transcript_auto_delete_days",Number(t.target.value)||0),className:"input"})]})]})]}),g&&e.jsx("p",{role:"alert",style:{color:"var(--color-orange-500)"},children:g}),x&&!g&&e.jsxs("p",{style:{color:"var(--color-grey-600)"},children:["Saved at ",x]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"primary-button",disabled:i,children:i?"Saving...":"Save settings"})})]})})]})}function d({label:n,description:l,checked:c,onChange:p,disabled:i}){return e.jsx("div",{className:"placeholder-card",style:{opacity:i?.6:1},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px",color:"var(--color-grey-900)"},children:n}),e.jsx("p",{style:{margin:0,color:"var(--color-grey-600)",fontSize:"0.95rem"},children:l})]}),e.jsxs("label",{style:{position:"relative",display:"inline-block",width:"60px",height:"34px"},children:[e.jsx("input",{type:"checkbox",checked:c,disabled:i,onChange:u=>p(u.target.checked),style:{opacity:0,width:0,height:0}}),e.jsx("span",{style:{position:"absolute",cursor:i?"not-allowed":"pointer",top:0,left:0,right:0,bottom:0,background:c?"var(--color-green-500)":"var(--color-grey-300)",transition:"0.4s",borderRadius:"34px"},children:e.jsx("span",{style:{position:"absolute",height:"26px",width:"26px",left:c?"30px":"4px",bottom:"4px",background:"white",transition:"0.4s",borderRadius:"50%"}})})]})]})})}export{_ as default};
