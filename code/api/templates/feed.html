{% extends "base.html" %}
{% block content %}
<h1>Feed</h1>
<form id="feedForm">
  <label>Title <input name="title" required /></label><br/>
  <label>Body <textarea name="body" required></textarea></label><br/>
  <button type="submit">Create</button>
</form>
<script>
document.getElementById('feedForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = {
    title: e.target.title.value,
    body: e.target.body.value,
    tags: []
  };
  const res = await fetch('/api/feed', {method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify(data)});
  const json = await res.json();
  alert(JSON.stringify(json, null, 2));
});
</script>
{% endblock %}
